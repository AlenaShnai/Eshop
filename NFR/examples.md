# Требования к сайту магазина

## **1. Общие требования**
- Сайт должен быть оформлен в цветах бренд-бука.
- Время загрузки главной страницы ≤1,5 сек при скорости интернета ≥10 Мбит/с.
- Цветовая схема соответствует **WCAG 2.1 AA** (контрастность ≥4.5:1).
- Адаптивный дизайн: поддержка разрешений от **320px (мобильные)** до **2560px (4K)**.
- Поддержка цветового профиля **sRGB** для корректного отображения на разных устройствах.

## **2. Каталог товаров**
### **2.1. Структура категорий**
- Пользователь может видеть товары, сгруппированные по разделам (бакалея, молочные продукты и т. д.).
- Загрузка категорий ≤1 сек при **50 000 товаров** в базе (кеширование через **CDN**).
- **Lazy loading** для товаров: подгрузка по **20 элементов** при скролле.
- Поддержка динамического добавления категорий без перезапуска сервера.
- Мультиязычность: названия категорий на **3+ языках** (включая **RTL-поддержку**).

### **2.2. Акционные товары**
- Пользователь может видеть весь перечень товаров, участвующих в акции на текущий период.
- Кеширование списка акционных товаров на **5 минут** (Redis/Memcached).
- Серверная валидация цен (защита от подмены через клиентские скрипты).
- Автоматическое отключение акции по истечении срока (без ручного вмешательства).

## **3. Корзина и заказы**
- Пользователь может добавлять товары в корзину.
- Автосохранение корзины при закрытии вкладки (**localStorage** + синхронизация с сервером).
- Проверка наличия товара на складе перед добавлением в корзину/оформлением заказа.
- Пользователь может видеть сумму стоимости товаров в корзине с учетом скидки.
- Округление по финансовым стандартам (**2 знака**, банковское округление).
- Перерасчет стоимости заказа при применении промокода должен выполняться не более чем за **0,5 секунд**.

## **4. Отзывы**
- Пользователь может писать отзывы на товары, которые он ранее приобретал.
- Автоматическая фильтрация запрещенных слов (**ML-модель** + ручная модерация) ≤1,5 сек.
- Проверка факта покупки товара (через историю заказов) ≤1,5 сек.
- Возможность прикреплять до **3 фото** (макс. **5 МБ**, сжатие до **WebP**).
- Пагинация отзывов (по **10 на страницу**) и фильтры ("только с фото") ≤1,5 сек.

## **5. Дисконтные карты**
- Пользователь может ввести номер дисконтной карты при оформлении заказа.
- Шифрование номера карты (**TLS 1.3**) и маскировка в логах (`**** **** **** 1234`).
- Проверка формата номера (**16 цифр**) должна выполняться за время не более **10 мс** (при средних условиях нагрузки).
- Система должна корректно обрабатывать не менее **10 000 проверок в секунду** без деградации производительности.
- Задержка ответа от системы лояльности ≤1 сек (**99-й перцентиль**).
- Кеширование статуса карты на **5 минут** (чтобы избежать повторных запросов).

## **6. Доставка**
### **6.1. Адрес доставки**
- Пользователь может указать адрес доставки или выбрать пункт выдачи.
- Автодополнение адресов через **Google Maps API** (≤1 сек на запрос).
- Валидация **ZIP-кодов** и исключение недоступных зон доставки.
- Валидация ZIP-кода должна выполняться менее чем за **50 мс**.
- Данные о зонах доставки должны обновляться не реже **1 раза в сутки**.
- Шифрованное хранение адресов (**AES-256**) в соответствии с **GDPR**.
- Система должна загружать историю адресов пользователя менее чем за **300 мс** (кеширование адресов — **1 день**).

### **6.2. Выбор времени доставки**
- При выборе способа доставки пользователь видит:
  - Режим работы пункта выдачи **или**
  - Диапазоны времени, когда может приехать курьер с заказом.
- Интерактивный календарь с цветовой индикацией загруженности (**зеленый/желтый/красный**).
- Валидация выбранного времени на сервере перед подтверждением заказа.
- Временные диапазоны должны обновляться в реальном времени (с учетом загруженности курьеров) с допустимой задержкой не более **0,5 сек**.
